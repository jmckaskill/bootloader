INC = -I /opt/local/include -I ../BearSSL/inc -I ../BearSSL/src
CFLAGS = -std=c11 $INC
LDFLAGS = -L /opt/local/lib

rule cc
 command = gcc $CFLAGS -MMD -MF $out.d -c $in -o $out
 deps = gcc
 depfile = $out.d
 description = CC $in

rule ld
 command = gcc $LDFLAGS $in -o $out
 description = LD $out

build sha1.o: cc ../BearSSL/src/hash/sha1.c
build enc32be.o: cc ../BearSSL/src/codec/enc32be.c
build dec32be.o: cc ../BearSSL/src/codec/dec32be.c
build crc.o: cc crc.c
build eth.o: cc eth.c
build eth_main.o: cc eth_main.c
build hw_mac_pcap.o: cc hw_mac_pcap.c
build tcp.o: cc tcp.c

build eth_main: ld $
 crc.o $
 eth.o $
 eth_main.o $
 hw_mac_pcap.o $
 tcp.o $
 sha1.o $
 enc32be.o $
 dec32be.o $
 /opt/local/lib/libpcap.a $

